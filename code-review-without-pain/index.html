<!DOCTYPE html><html domain="klimakov.me" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="" http-equiv="Content-Security-Policy"><link href="/img/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/img/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/img/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/img/favicon/site.webmanifest" rel="manifest"><link href="/img/favicon/safari-pinned-tab.svg" rel="mask-icon" color="#5bbad5"><meta content="#da532c" name="msapplication-TileColor"><meta content="#ffffff" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>Код ревью, как внедрить и не испытывать боль</title><meta content="Код ревью, как внедрить и не испытывать боль" property="og:title"><meta content="bb949fb6b5fa5e51" name="yandex-verification"><meta content="Статья о плюсах внедрения код-ревью на проекте и советы как его лучше реализовать." name="description"><meta content="Статья о плюсах внедрения код-ревью на проекте и советы как его лучше реализовать." property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@update_me" name="twitter:site"><meta content="@update_me" name="twitter:creator"><meta content="https://klimakov.me/img/remote/2d7XEw.jpg" property="og:image"><link href="https://klimakov.me/code-review-without-pain/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Навожу суету"><link href="/" rel="preconnect" crossorigin=""><script async="" src="/js/min.js?hash=8d37b4a02b" defer=""></script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><script async="" src="https://analytics.klimakov.me/js/plausible.js" defer="" data-domain="klimakov.me"></script><style>:root{--primary: #123C69;--bg: #EEE2DC;--text: #0B0C10;--link: #123C69;--tag: #EDC7B7;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{z-index:1;position:fixed;top:0;left:0;width:100vw;padding:.375em 1.5em;background:var(--bg);font-weight:200;text-align:right;border-bottom:1px solid var(--primary);height:70px;display:flex;align-items:center}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}.title-block{height:250px;display:flex;align-items:center;justify-content:center;padding:1rem;flex-direction:column;background-image:url(/img/persik.svg);background-size:cover}.post-title{margin:0 0 20px}dialog{background-color:var(--tag);z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative;width:100%}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:100;src:url(/fonts/Inter-Thin.woff2) format("woff2"),url(/fonts/Inter-Thin.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:100;src:url(/fonts/Inter-ThinItalic.woff2) format("woff2"),url(/fonts/Inter-ThinItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:200;src:url(/fonts/Inter-ExtraLight.woff2) format("woff2"),url(/fonts/Inter-ExtraLight.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:200;src:url(/fonts/Inter-ExtraLightItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraLightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:300;src:url(/fonts/Inter-Light.woff2) format("woff2"),url(/fonts/Inter-Light.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:300;src:url(/fonts/Inter-LightItalic.woff2) format("woff2"),url(/fonts/Inter-LightItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:400;src:url(/fonts/Inter-Regular.woff2) format("woff2"),url(/fonts/Inter-Regular.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:400;src:url(/fonts/Inter-Italic.woff2) format("woff2"),url(/fonts/Inter-Italic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:500;src:url(/fonts/Inter-Medium.woff2) format("woff2"),url(/fonts/Inter-Medium.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:500;src:url(/fonts/Inter-MediumItalic.woff2) format("woff2"),url(/fonts/Inter-MediumItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:600;src:url(/fonts/Inter-SemiBold.woff2) format("woff2"),url(/fonts/Inter-SemiBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:600;src:url(/fonts/Inter-SemiBoldItalic.woff2) format("woff2"),url(/fonts/Inter-SemiBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:700;src:url(/fonts/Inter-Bold.woff2) format("woff2"),url(/fonts/Inter-Bold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:700;src:url(/fonts/Inter-BoldItalic.woff2) format("woff2"),url(/fonts/Inter-BoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:800;src:url(/fonts/Inter-ExtraBold.woff2) format("woff2"),url(/fonts/Inter-ExtraBold.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:800;src:url(/fonts/Inter-ExtraBoldItalic.woff2) format("woff2"),url(/fonts/Inter-ExtraBoldItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:normal;font-weight:900;src:url(/fonts/Inter-Black.woff2) format("woff2"),url(/fonts/Inter-Black.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI";font-style:italic;font-weight:900;src:url(/fonts/Inter-BlackItalic.woff2) format("woff2"),url(/fonts/Inter-BlackItalic.woff) format("woff")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:normal;font-named-instance:"Regular";src:url(/fonts/Inter-roman.var.woff2) format("woff2")}@font-face{font-display:optional;font-family:"Inter UI var alt";font-weight:100 900;font-style:italic;font-named-instance:"Italic";src:url(/fonts/Inter-italic.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-size:16px;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}button,hr{overflow:visible}hr{box-sizing:content-box;height:0;border-bottom:1px solid #eee}a{background-color:transparent;text-decoration:none;color:var(--link)}b,strong{font-weight:700}code{overflow-x:auto;border-radius:.3em;color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;line-height:1.15;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}body,p,ul{font-size:1em}p,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}body,p,ul{font-size:1rem;line-height:1.6}p,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}body,p,ul{font-size:1.1rem;line-height:1.6}h1,h2,p,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:4rem;line-height:4.72rem}h2{font-size:3.05rem;line-height:3.8rem}body,p,ul{font-size:1.2rem;line-height:1.6}h1,h2,p,ul{margin-bottom:1.632rem}}h1,h2{font-family:var(--font-family);color:var(--text)}h2{font-style:italic}a:hover{text-decoration:underline}@supports (font-variation-settings:normal){html{font-family:Inter UI var alt,sans-serif;--font-family: Inter UI var alt, sans-serif}}button{border-radius:.3em;max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:var(--link);color:#181818;background:var(--primary)}button:not([disabled]):hover{background:var(--link);color:#000;background:var(--tag)}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:var(--bg);color:var(--text)}header{height:70px;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:var(--primary);margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{min-height:calc(100vh - 200px);max-width:70rem;margin:0 auto}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ul{margin-bottom:0}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}</style></head><body><header><nav><div id="nav"><h1><a href="/" title="Homepage">Навожу суету</a></h1></div></nav><dialog id="message"></dialog></header><div class="title-block"><h1 class="post-title">Код ревью, как внедрить и не испытывать боль</h1><aside>Чтение займет: 3 м.</aside></div><main><article><h2 id="%D0%B7%D0%B0%D1%87%D0%B5%D0%BC%3F">Зачем? <a href="#%D0%B7%D0%B0%D1%87%D0%B5%D0%BC%3F" class="direct-link">#</a></h2><p>Если вы работаете в продуктовой компании, то жизненный цикл почти каждого продукта будет соответствовать <a href="https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%BA%D0%BE%D0%BD_%D0%9F%D0%B0%D1%80%D0%B5%D1%82%D0%BE">принципу Парето</a>:</p><ul><li>20% времени мы пишем новый код.</li><li>80% времени поддерживаем старый. Поддержка в себя включает фиксы багов, обновление кодовой базы (переезд на новые библиотеки например).</li></ul><p>Во время поддержки мы хотим чтобы все разработчики как можно быстрее вникали в то, что написано. Для этого есть много способов, все они прекрасны и хорошо работают вместе.</p><p>Способы иметь хорошо поддерживаемый код:</p><ul><li>Покрытие тестами</li><li>Ведение документации</li><li>Код ревью</li></ul><p>Все эти способы нужно уметь готовить. Есть тесты, которые только мешают, бесполезная документация и бессмысленный код ревью.</p><h2 id="%D1%87%D1%82%D0%BE-%D0%B6%D0%B5-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D0%BA%D0%BE%D0%B4-%D1%80%D0%B5%D0%B2%D1%8C%D1%8E%3F">Что же такое код ревью? <a href="#%D1%87%D1%82%D0%BE-%D0%B6%D0%B5-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D0%BA%D0%BE%D0%B4-%D1%80%D0%B5%D0%B2%D1%8C%D1%8E%3F" class="direct-link">#</a></h2><p>Основные понятия:<br><a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80_%D0%BA%D0%BE%D0%B4%D0%B0">Код ревью (code review)</a> - это часть процесса разработки продукта. В нем есть следующие участники:</p><ul><li>Автор - разработчик, который написал код. При этом любого объема, содержания и качества. Это может быть багфикс, фича</li><li>Ревьюер - человек, который проверяет написанное, пишет замечания и возвращает код на доработку.</li></ul><p>Что нам даёт код ревью:<br>➕ Проверку кода по многим критериям.<br>Автор не всегда видит <strong>неочевидные места</strong> в его коде (по разным причинам).<br>В результате написания и переписывания может быть потеряна <strong>композиция</strong>.<br>Автор, находясь в контексте задачи может недостаточно оставить <strong>комментариев</strong>.<br>Эти и многие другие проблемы может решить код ревью.</p><p>➕ Шаринг знаний о проекте.<br>Не только автор знает, что там пишется в другом проекте или части проекта, а все.</p><p>➕ Шаринг знаний о технологиях.<br>Вы можете заметить, что кто-то напилил своих костылей, а похожая проблема в проекте уже решалась. В таком случае ревьюер может подсказать что уже использовалось и избежать ненужного кода</p><p>➕ Сотрудники быстрее онбордятся.<br>Новые сотрудники, проводя код ревью, быстрее узнают и понимают традиции команды, а проходя его, имеют возможность исправить ошибки, узнать больше о продукте и меньше испытывать стресс.</p><p>Способов поддерживать код «качественным» есть много, но все их нужно правильно готовить. Нужно уметь писать тесты, нужно уметь писать документацию и нужно правильно организовать код ревью.</p><h2 id="%D1%81%D0%BE%D0%B2%D0%B5%D1%82%D1%8B-%D0%BF%D0%BE-%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%B0">Советы по организации процесса <a href="#%D1%81%D0%BE%D0%B2%D0%B5%D1%82%D1%8B-%D0%BF%D0%BE-%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%B0" class="direct-link">#</a></h2><p>❌ Ревьюить только джунов и новых коллег<br>✅ Проводить ревью для всех и всеми</p><p>В коде лидов тоже могут быть ошибки. Усталость, взгляд замылился, бабушка заболела, задачу неправильно понял - причин совершить ошибку может быть много. Коллеги со свежим взглядом помогут вовремя ошибку исправить.</p><p>Джуниор разработчики могут подсмотреть какие-то практики, методы, способы из кода сеньора. Вместо того, чтобы собирать их в переговорках и обучать - давайте читать новый код и задавать вопросы. Это уменьшит стоимость обучения и уровень стресса.</p><p>Если ревью проходят не все, то в вашей команде это будет восприниматься как источник недоверия и неравенства. Такую атмосферу следует избегать.</p><p>❌ Обсуждать на код ревью стиль<br>✅ Настроить у себя на проекте инструменты, которые автоматически будут исправлять стиль перед коммитом</p><p>В JS это eslint и prettier. Не тратьте время своё и коллег на споры о вкусах. Договоритесь заранее и пропишите правила. В случае разногласий голосуйте.</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2t80T9-1920w.avif 1920w, /img/remote/Z2t80T9-1280w.avif 1280w, /img/remote/Z2t80T9-640w.avif 640w, /img/remote/Z2t80T9-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2t80T9-1920w.webp 1920w, /img/remote/Z2t80T9-1280w.webp 1280w, /img/remote/Z2t80T9-640w.webp 640w, /img/remote/Z2t80T9-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/Z2t80T9-1920w.jpg 1920w, /img/remote/Z2t80T9-1280w.jpg 1280w, /img/remote/Z2t80T9-640w.jpg 640w, /img/remote/Z2t80T9-320w.jpg 320w" type="image/jpeg"><img alt="" decoding="async" height="330" loading="lazy" src="/img/remote/Z2t80T9-1920w.jpg" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 563 330'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAIAAAB1kpiRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVQI1wG6AEX/AP7uzP7xy/3tzP3ryv7syv/tyv/syP/ux//uyf/tzADpoEbplUvtr0XttUzpsUrlrUrlslneqlvfpVHmqkYAvn0rv2k6wGQ2xIxFvZVPt4dHrYNQl2ZgrGxUtXY5AOf4+Ojg7Npxx858seCowey4yK+pjpq1kPLy9ufz9ACf0P6jvPO9luCsdbzROZPiWJ3DkaiSkbmfyPqgzf0ASJbcR5ncTZHcY3vLhWi+lmi5bYPNT5ThSJjdSJfcbst6HeRYq24AAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)" width="563"></picture></p><p>❌ Ревьюер запускает руками билд или проверяет код на баги.<br>✅ Автор сам несет ответственность за поставленный код.</p><p>Проверять код в IDE и запускать код ревьюером - это огромная трата времени. Хорошо налаженный процесс выглядит так:</p><ul><li>Автор тщательно проверил свой код на работоспособность и залил в удаленный git репозиторий</li><li>На сервере CI/CD проверяет тесты, сборку, работоспособность в целом.</li><li>Проверка со стороны ревьюера.</li></ul><p>И после исправления замечаний - всё, код отправляется на следующий этап. Если в коде есть ошибки они будут обнаружены отделом тестирования, либо попадут на прод.</p><p>Задача ревью не проверить всё на 100% - у вас это все равно не получится. Задача - иметь поддерживаемый, понятный и максимально “чистый” код.</p><p>❌ Ревьюер не читает код<br>✅ Обращать внимание на композицию, магические переменные, оптимизацию (там где это имеет смысл)</p><p>Ваша задача, как ревьюера, получить такой код, который в случае болезни разработчика вы завтра будете поддерживать и не потонете. Задача автора - писать код, который как будто будет поддерживать маньяк, который знает где живет автор.</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/BbXrH-1920w.avif 1920w, /img/remote/BbXrH-1280w.avif 1280w, /img/remote/BbXrH-640w.avif 640w, /img/remote/BbXrH-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/BbXrH-1920w.webp 1920w, /img/remote/BbXrH-1280w.webp 1280w, /img/remote/BbXrH-640w.webp 640w, /img/remote/BbXrH-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/BbXrH-1920w.jpg 1920w, /img/remote/BbXrH-1280w.jpg 1280w, /img/remote/BbXrH-640w.jpg 640w, /img/remote/BbXrH-320w.jpg 320w" type="image/jpeg"><img alt="" decoding="async" height="257" loading="lazy" src="/img/remote/BbXrH-1920w.jpg" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 300 257'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA30lEQVQI1x2MP6tGYByGn8FuUUJWiw9gYlImjD6AIhn8mbwLZbEbDbKTDMpw6jzDKc9HsPkI5rcT7+84hqu77qv7Rtu2fTVNg1+v13dd13hZFtx1He77Hs/zjNFxHJCmKWRZBm3bwjiOUFUVhGEIeZ4D2vf9nSTJVZblOQzDqSjKqWnak47jnGhd198gCCCO48//i2ma4Ps+RFEEtm0DKorirev6R1XV0zCMi6bpB4qiLoTQhSRJApZlwbIs8DzvQZZluCWIogiI47gfnueJIAjrXZB7TRiGIa7rkmmayB+1QnQxgy8yVwAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)" width="300"></picture></p><p>❌ Агрессия, негатив, «токсичное» поведение в комментах<br>✅ Старайтесь отмечать не только негативные стороны, но и хвалить за позитивные.</p><p>Разработчики к своему коду всегда относятся довольно щепетильно. Не зря профессия считается творческой. Поэтому относится к проблемам на код ревью стоит так, как будто вам прислали оценить произведение собственного творчества - стих, картину, книги.</p><p>Агрессия, негатив и токсичное поведение в принципе стоит избегать во всех областях жизни. Грубое поведение во время код ревью может привести к:</p><ul><li>Конфликтам</li><li>Стрессу и страху совершить ошибку</li><li>Падению мотивации</li></ul><p>Примеры плохих комментов:</p><blockquote><p>«это плохой код», «перепиши»</p></blockquote><p>Примеры хороших комментов:</p><blockquote><p>«Давай попробуем сделать …» «Может попробуем вынести…»</p></blockquote><p>То же самое касается и ответов на комменты автором. Если автор не согласен, то необходимо объяснять с помощью аргументов, а не фраз в духе "я так делать не буду". Если не получается текстом, иногда проще подойти или сделать короткий созвон, чтобы понять друг друга.</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ifB0C-1920w.avif 1920w, /img/remote/ifB0C-1280w.avif 1280w, /img/remote/ifB0C-640w.avif 640w, /img/remote/ifB0C-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ifB0C-1920w.webp 1920w, /img/remote/ifB0C-1280w.webp 1280w, /img/remote/ifB0C-640w.webp 640w, /img/remote/ifB0C-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ifB0C-1920w.jpg 1920w, /img/remote/ifB0C-1280w.jpg 1280w, /img/remote/ifB0C-640w.jpg 640w, /img/remote/ifB0C-320w.jpg 320w" type="image/jpeg"><img alt="" decoding="async" height="640" loading="lazy" src="/img/remote/ifB0C-1920w.jpg" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 640 640'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQI1wHIADf/AJmSh6yjlcnAsMG+vczIxuDe2t3e3O/v7wDHv7Pc18awppdhW1tSVlp5eX6mp6rk5OQAm5GG0M7EsaiTGBEOHR8iICIqGB0nrrCyAJZ8aaWNeLOZdquSgZqMhDo6PAkLEWJhYgCae2SSclyynZLp39d8eHQAAQMPEBU8NzUAnop4vqaW2NLO3NnZb25sUlNUTk9RysrMAJCDcpOHd722raGck1hTRmJjZJCTltzh5QCLfm+EeGl+c2V/dGJ4bl+HgXuOjImvtbnvPGY/fMRFoAAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)" width="640"></picture></p><p>❌ Все комментарии обязательны к исправлению<br>✅ Помечать необязательные комментарии</p><p>В замечаниях могут быть необязательные правки - например вкусовщина, или замечания, требующие большую переработку кода. Такие комментарии обязательно помечайте. Если автор не готов их пофиксить сразу, то:</p><ul><li>Когда правка относится к вкусовщине - забить</li><li>Когда правка большая - завести под нее отдельную таску.</li></ul><p>❌ Пытаться объяснить алгоритмы на словах<br>✅ Написать пример псевдокода</p><p>Особенно актуально, если автор не совсем понимает что от него хочет ревьюер. Не нужно полностью писать реализацию. Напишите небольшой пример псевдокода. Gitlab, github и bitbucket позволяют вставлять в комментарии разметку markdown. Ваш код будет хорошо отформатирован и более понятен, чем длинная цепочка комментов.</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1I7bfM-1920w.avif 1920w, /img/remote/1I7bfM-1280w.avif 1280w, /img/remote/1I7bfM-640w.avif 640w, /img/remote/1I7bfM-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1I7bfM-1920w.webp 1920w, /img/remote/1I7bfM-1280w.webp 1280w, /img/remote/1I7bfM-640w.webp 640w, /img/remote/1I7bfM-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/1I7bfM-1920w.jpg 1920w, /img/remote/1I7bfM-1280w.jpg 1280w, /img/remote/1I7bfM-640w.jpg 640w, /img/remote/1I7bfM-320w.jpg 320w" type="image/jpeg"><img alt="" decoding="async" height="450" loading="lazy" src="/img/remote/1I7bfM-1920w.jpg" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 600 450'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAIAAABV+fA3AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAz0lEQVQI1wHEADv/ABAPEldTU2hpa1tdYV1gZZ+VkJ6Ri2ZaVyIbHQBlW2JqW1Z/Y2WWcnAyOEOMeHGLeXhnW147MjQAWU5SOTQ3clNaiGNgLjdDXmpxQkJLR09eWmFpABMeIRkaHhwcIx8dIBghLD9hdzhEUTVFUUtkdgARHDAKDhgFCQ0QGCMRFCIlSWI9cotPhqBrsMwAOT5LWFpeVlNUcnyIdZGhiJCbi7O/hLfLjOT1ADgrJzY0Njo9UI+Uo6zIyqbZ5WyVrV2Al4LN3dd/RKBRiNG4AAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="600"></picture></p><p>❌ Оставлять больше 50 комментариев<br>✅ Оставлять до 50 комментариев</p><p>Если комментариев накапливается очень много, то у вас:</p><ul><li>Или не настроены линтеры, и вы не определились со стилем, поэтому комменты о вкусовщине</li><li>Или переделать в коде нужно многое</li></ul><p>Во втором случае оставьте 1 комментарий с рекомендациями как и что нужно переписать. В таком случае лучше закрыть мердж реквест, переписать код и открыть новый.</p><p>Если код будет переписан полностью, отследить изменение по комментариям практически невозможно и они не имеют смысла. Авторы тоже должны это понимать и следить, чтобы всем было комфортно.</p><p>❌ Отправлять огромные фрагменты кода на ревью<br>✅ Дробить большие участки кода на несколько реквестов и вливать постепенно</p><p>Задачи бывают разными по объему. Может быть задача исправить 1 строчку кода, а может быть задача отрефакторить весь проект. Во втором случае не отправляйте реквест в котором исправлены 500 файлов и 4000 изменений. Никто в здравом уме не сможет это нормально проверить, и желания такое проверять вы тоже не найдете.</p><p>Чтобы избежать:</p><ul><li>Сделайте ветку feature/epic-name</li><li>Изменения делайте в ветке feature/epic-name-implement</li><li>Pull реквесты делайте в ветку feature/epic-name. Порционно.</li><li>В конце реализации фичи подлейте feature/epic-name в мастер. Да, в этом случае пулл реквест тоже будет огромный, но всё уже будет заранее проверено</li></ul><p>Другой вариант как этого избежать: feature flags. Вы вливаете изменения на прод, но не даете им пользоваться. Нормально это реализовано мало у кого. Поэтому с этим подходом нужно быть осторожнее.</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZLst4u-1920w.avif 1920w, /img/remote/ZLst4u-1280w.avif 1280w, /img/remote/ZLst4u-640w.avif 640w, /img/remote/ZLst4u-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZLst4u-1920w.webp 1920w, /img/remote/ZLst4u-1280w.webp 1280w, /img/remote/ZLst4u-640w.webp 640w, /img/remote/ZLst4u-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZLst4u-1920w.jpg 1920w, /img/remote/ZLst4u-1280w.jpg 1280w, /img/remote/ZLst4u-640w.jpg 640w, /img/remote/ZLst4u-320w.jpg 320w" type="image/jpeg"><img alt="" decoding="async" height="588" loading="lazy" src="/img/remote/ZLst4u-1920w.jpg" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 479 588'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAJCAYAAAD+WDajAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCklEQVQY0w3HPUsCcQDA4f+naHKooQ/QGLUmVEpcehhaWXAWdDW0Zt7QYEGCYB5EIYWQCRqoYGI2mJFSGaINXu/UJ5BeOHDoV8/2CIfThdc7g81uR/XNk94LM/d/SZIQksPJtMeNpgVYDwSIRSO0Gk02g0GEbdxKr6WHlSWFy3KBm9oFX98/NBt3iFnZimwdwOceo17N07g+A375eH9FKK4RFiYHWVUkKqU0t1cFut0ub88GYso2jLY4il+VKebi1MoZTNPk5bGN6O+z4JkYYm3ZRTa5S6WY4rPT4al9j9jwq0QjIcKhLbLpIyrneQzjgVa9isgmdFJxnZi+TfJgh5PjQ0qnOTKJff4ANu6sH5k9NIEAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)" width="479"></picture></p><p>❌ Pull Request висит без ревью трое суток<br>✅ Выработать расписание</p><p>Среди аргументов против код ревью вы услышите, что с ним у вас увеличивается время "доставки" фич. Чтобы этого не происходило, выработайте у ревьюеров расписание. Например, новые реквесты проверять до работы и перед уходом домой, а исправленные в перерывах в течении дня (например пока проект собирается или тесты гоняются).</p><h2 id="%D0%B2-%D0%B7%D0%B0%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B8">В заключении <a href="#%D0%B2-%D0%B7%D0%B0%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B8" class="direct-link">#</a></h2><p>В этой статье я хотел рассказать и показать плюсы проведения код ревью. Будучи старшим разработчиком я всегда за то, чтобы мой код проходил code review. Лично для меня это отличный способ “увидеть” свой код чужими глазами. еще до того как ветка отправляется на ревью. Не говоря уже о том, что для команд это недорогой и эффективный способ иметь кодовую базу, с которой можно будет эффективно работать.</p><p>Если в вашей команде нет код ревью, то самое время его внедрить 🙂.</p><h2 id="%D0%BF%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C">Почитать <a href="#%D0%BF%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C" class="direct-link">#</a></h2><p>По теме рекомендую почитать:<br><a href="https://mtlynch.io/human-code-reviews-1/">Статья How to Do Code Reviews Like a Human</a></p><h2 id="%D0%B1%D0%BB%D0%B0%D0%B3%D0%BE%D0%B4%D0%B0%D1%80%D0%BD%D0%BE%D1%81%D1%82%D0%B8">Благодарности <a href="#%D0%B1%D0%BB%D0%B0%D0%B3%D0%BE%D0%B4%D0%B0%D1%80%D0%BD%D0%BE%D1%81%D1%82%D0%B8" class="direct-link">#</a></h2><p>Спасибо лису и kirjs из <a href="https://t.me/LearnInPublic">@learnInPublic</a> за ревью</p><h1>🙏🙏🙏</h1><p>Спасибо за прочтение! Если вам понравилась статья, вы можете ею <a href="https://klimakov.me/code-review-without-pain/" on-click="share">поделиться</a> в вашей любимой социальной сети.</p><p>Чтобы узнавать о выходе новых статей, <a href="https://t.me/klimakov_blog" rel="noopener" target="_blank">подписывайтесь на телеграм канал</a></p><hr><div>Предыдущий: <a href="/how-to-update-preview-in-telegram/">Настройки сайта для социальных сетей</a></div><share-widget><button aria-label="Share" href="https://klimakov.me/code-review-without-pain/" on-click="share"><div></div></button></share-widget><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Код ревью, как внедрить и не испытывать боль","image":["https://klimakov.me/img/remote/Z2t80T9-1920w.jpg","https://klimakov.me/img/remote/BbXrH-1920w.jpg","https://klimakov.me/img/remote/ifB0C-1920w.jpg","https://klimakov.me/img/remote/1I7bfM-1920w.jpg","https://klimakov.me/img/remote/ZLst4u-1920w.jpg"],"author":"Author Name. Update me.","genre":"Insert a schema.org genre","publisher":{"@type":"Organization","name":"Publisher name. Update me.","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-32x32.png?hash=c34e742ae3"}},"url":"https://klimakov.me/code-review-without-pain/","mainEntityOfPage":"https://klimakov.me/code-review-without-pain/","datePublished":"2021-08-18","dateModified":"2021-08-27","description":"Зачем? # Если вы работаете в продуктовой компании, то жизненный цикл почти каждого продукта будет соответствовать принципу Парето: 20%..."}</script></article><script async="" src="https://utteranc.es/client.js" crossorigin="anonymous" issue-term="pathname" repo="olegklimakov/blog" theme="preferred-color-scheme"></script></main><footer>© Klimakov 2021</footer></body></html>